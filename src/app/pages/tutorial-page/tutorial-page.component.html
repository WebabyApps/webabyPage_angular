<!-- Guard: render only when scopePath is a non-empty string -->
<ng-container *ngIf="scopePath as sp">

  <!-- HERO -->
  <app-hero
  [scope]="sp"
  [title]="'hero.title'"
  [subtitle]="'hero.subtitle'"
  [ctaText]="'hero.back'"
  [ctaLink]="['/']"
  [ctaFragment]="'products'"
  brandScrollTarget="page-title"  
  [showQr]="true"
  [appUrl]="appUrl"
  [qrSize]="150"
  qrEcLevel="M"> 
></app-hero>




  <section class="container tutorial narrow">
    <h1 id="page-title">{{ tr('title') }}</h1>


    <!-- KLUCZOWE: precyzyjnie rozdzielamy po slug -->
    <ng-container [ngSwitch]="sp">

      <!-- ========== ABC-land ========== -->
      <ng-container *ngSwitchCase="'abc-land'">
        <img
          class="app-header"
          src="assets/tutorials/abc-land/scene2_800.webp"
          [attr.alt]="tr('title')"
          fadeInOnScroll />

        <h2>{{ tr('description.title') }}</h2>
        <p class="lead">{{ tr('description.lead') }}</p>

        <app-tutorial-section
          [title]="tr('sections.startMenu.title')"
          [img]="'assets/tutorials/abc-land/screenshoot2.jpg'"
          [lazyImg]="true"
          [alt]="tr('sections.startMenu.caption')"
          [caption]="tr('sections.startMenu.caption')"
          [reverse]="true"
          [scope]="sp">
          <p>{{ tr('sections.startMenu.intro') }}</p>
          <ul>
            <ng-container *transloco="let t; scope: sp">
              <li *ngFor="let item of arr(t('sections.startMenu.items', { returnObjects: true }))">
                {{ item }}
              </li>
            </ng-container>
          </ul>
        </app-tutorial-section>

        <app-tutorial-section
          [title]="tr('sections.sound.title')"
          [img]="'assets/tutorials/abc-land/sound-settings.jpg'"
          [lazyImg]="true"
          [alt]="tr('sections.sound.caption')"
          [caption]="tr('sections.sound.caption')"
          [reverse]="true"
          [scope]="sp">
          <p>{{ tr('sections.sound.p') }}</p>
        </app-tutorial-section>

        <app-tutorial-section
          [title]="tr('sections.intro.title')"
          [img]="'assets/tutorials/abc-land/screenshoot3.jpg'"
          [lazyImg]="true"
          [alt]="tr('sections.intro.caption')"
          [caption]="tr('sections.intro.caption')"
          [reverse]="true"
          [scope]="sp">
          <p>{{ tr('sections.intro.p') }}</p>
        </app-tutorial-section>

        <app-tutorial-section
          [title]="tr('sections.steering.title')"
          [img]="'assets/tutorials/abc-land/screenshoot7.jpg'"
          [lazyImg]="true"
          [alt]="tr('sections.steering.caption')"
          [caption]="tr('sections.steering.caption')"
          [reverse]="true"
          [scope]="sp">
          <p>{{ tr('sections.steering.p1') }}</p>
          <p>{{ tr('sections.steering.p2') }}</p>
          <p>{{ tr('sections.steering.p3') }}</p>
        </app-tutorial-section>

        <app-tutorial-section
          [title]="tr('sections.tasks.title')"
          [img]="'assets/tutorials/abc-land/screenshoot1.jpg'"
          [lazyImg]="true"
          [alt]="tr('sections.tasks.caption')"
          [caption]="tr('sections.tasks.caption')"
          [reverse]="true"
          [scope]="sp">
          <p>{{ tr('sections.tasks.p1') }}</p>
          <section id="main-game" class="section">
            <p>{{ tr('sections.tasks.savingExample') }}</p>
          </section>
        </app-tutorial-section>

        <app-tutorial-section
          [title]="tr('sections.lighter.title')"
          [img]="'assets/tutorials/abc-land/Lighter.png'"
          [lazyImg]="true"
          [alt]="tr('sections.lighter.caption')"
          [caption]="tr('sections.lighter.caption')"
          [reverse]="true"
          [scope]="sp">
          <p>{{ tr('sections.lighter.p') }}</p>
        </app-tutorial-section>

        <app-tutorial-section
          [title]="tr('sections.fixing.title')"
          [img]="'assets/tutorials/abc-land/fixing_items.png'"
          [lazyImg]="true"
          [alt]="tr('sections.fixing.caption')"
          [caption]="tr('sections.fixing.caption')"
          [reverse]="true"
          [scope]="sp">
          <p>{{ tr('sections.fixing.p') }}</p>
        </app-tutorial-section>

        <app-tutorial-section
          [title]="tr('sections.buying.title')"
          [img]="'assets/tutorials/abc-land/Buying_items.png'"
          [lazyImg]="true"
          [alt]="tr('sections.buying.caption')"
          [caption]="tr('sections.buying.caption')"
          [reverse]="true"
          [scope]="sp">
          <p>{{ tr('sections.buying.p') }}</p>
        </app-tutorial-section>

        <app-tutorial-section
          [title]="tr('sections.map.title')"
          youtubeId="p2_UkiHcRmQ"
          [autoplay]="false"
          [start]="0"
          [reverse]="true"
          [lazyVideo]="false"
          [caption]="tr('sections.map.caption')"
          [scope]="sp">
          <p>{{ tr('sections.map.videoCaption') }}</p>
        </app-tutorial-section>

        <!-- GALLERY -->
        <section id="gallery" class="section">
          <h3>{{ tr('gallery.title') }}</h3>
          <div class="media-grid">
            <figure>
              <img src="assets/tutorials/abc-land/screenshoot2.jpg"
                   [attr.alt]="tr('gallery.mainMenu')" loading="lazy" decoding="async">
              <figcaption>{{ tr('gallery.mainMenu') }}</figcaption>
            </figure>
            <figure>
              <img src="assets/tutorials/abc-land/screenshoot3.jpg"
                   [attr.alt]="tr('gallery.intro')" loading="lazy" decoding="async">
              <figcaption>{{ tr('gallery.intro') }}</figcaption>
            </figure>
            <figure>
              <img src="assets/tutorials/abc-land/screenshoot1.jpg"
                   [attr.alt]="tr('gallery.tasks')" loading="lazy" decoding="async">
              <figcaption>{{ tr('gallery.tasks') }}</figcaption>
            </figure>
          </div>
        </section>

        <!-- VIDEO -->
        <section id="video" class="section">
          <h3>{{ tr('video.title') }}</h3>
          <div class="video">
            <figure class="yt yt--md">
              <iframe
                src="https://www.youtube-nocookie.com/embed/5Q6ibSmZLxs?si=I9jAXtzt8k9WFRFR"
                title="ABC-Land demo" loading="lazy"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen></iframe>
              <figcaption>{{ tr('video.walkthrough') }}</figcaption>
            </figure>
            <small class="caption">{{ tr('video.walkthrough') }}</small>
          </div>
        </section>
      </ng-container>
      <!-- /ABC-land -->

      <!-- ========== Basketball Shots ========== -->
      <ng-container *ngSwitchCase="'basketball-shots'">
        <!-- Title + lead -->
        <h2>{{ tr('description.title') }}</h2>
        <p class="lead">{{ tr('description.lead') }}</p>

        <!-- Header image -->
        <img class="app-header"
             src="assets/tutorials/basketball-shots/header.jpg"
             [attr.alt]="tr('title')"
             loading="lazy" decoding="async" />

        <!-- HOW TO PLAY -->
        <app-tutorial-section
          [title]="tr('sections.how.title')"
          [img]="'assets/tutorials/basketball-shots/how.jpg'"
          [lazyImg]="true"
          [alt]="tr('sections.how.caption')"
          [caption]="tr('sections.how.caption')"
          [reverse]="false"
          [scope]="sp">
          <p>{{ tr('sections.how.intro') }}</p>
          <ul>
            <li *ngFor="let step of (howSteps$ | async)">{{ step }}</li>
          </ul>
        </app-tutorial-section>

        <!-- SCORING / TIPS -->
        <app-tutorial-section
          [title]="tr('sections.tips.title')"
          [img]="'assets/tutorials/basketball-shots/screenshoot1.jpg'"
          [lazyImg]="true"
          [alt]="tr('sections.tips.caption')"
          [caption]="tr('sections.tips.caption')"
          [reverse]="true"
          [scope]="sp">
          <p>{{ tr('sections.tips.intro') }}</p>
          <ul>
            <li *ngFor="let tip of (tips$ | async)">{{ tip }}</li>
          </ul>
        </app-tutorial-section>

        <!-- FEATURES -->
        <app-tutorial-section
          [title]="tr('sections.features.title')"
          [img]="'assets/tutorials/basketball-shots/screenshoot2.jpg'"
          [lazyImg]="true"
          [alt]="tr('sections.features.caption')"
          [caption]="tr('sections.features.caption')"
          [reverse]="false"
          [scope]="sp">
          <p>{{ tr('sections.features.p') }}</p>
          <ul>
            <li *ngFor="let f of (features$ | async)">{{ f }}</li>
          </ul>
        </app-tutorial-section>

        <!-- GALLERY -->
        <section id="gallery" class="section">
          <h3>{{ tr('gallery.title') }}</h3>
          <div class="media-grid">
            <figure>
              <img src="assets/tutorials/basketball-shots/screenshoot2.jpg"
                   [attr.alt]="tr('gallery.mainMenu')" loading="lazy" decoding="async">
              <figcaption>{{ tr('gallery.mainMenu') }}</figcaption>
            </figure>
            <figure>
              <img src="assets/tutorials/basketball-shots/screenshoot3.jpg"
                   [attr.alt]="tr('gallery.intro')" loading="lazy" decoding="async">
              <figcaption>{{ tr('gallery.intro') }}</figcaption>
            </figure>
            <figure>
              <img src="assets/tutorials/basketball-shots/screenshoot1.jpg"
                   [attr.alt]="tr('gallery.tasks')" loading="lazy" decoding="async">
              <figcaption>{{ tr('gallery.tasks') }}</figcaption>
            </figure>
          </div>
        </section>

        <!-- VIDEO -->
        <section id="video" class="section">
          <h3>{{ tr('video.title') }}</h3>
          <div class="video">
            <figure class="yt yt--md">
              <iframe
                src="https://www.youtube-nocookie.com/embed/309b6uUm-AU"
                title="Basketball Shots demo" loading="lazy"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen></iframe>
              <figcaption>{{ tr('video.walkthrough') }}</figcaption>
            </figure>
            <small class="caption">{{ tr('video.walkthrough') }}</small>
          </div>
        </section>

        <!-- KEYWORDS (optional) -->
        <section class="keywords">
          <small>{{ tr('keywords') }}</small>
        </section>
      </ng-container>
      <!-- /Basketball Shots -->

      <!-- ========== Lucky Draw ========== -->
      <ng-container *ngSwitchCase="'lucky-draw'">
        <!-- Header image -->
        <img class="app-header"
             src="assets/tutorials/lucky-draw/header.jpg"
             [attr.alt]="tr('title')"
             loading="lazy" decoding="async" />

        <!-- HOW IT WORKS -->
        <app-tutorial-section
          [title]="tr('sections.how.title')"
          [img]="'assets/tutorials/lucky-draw/how.jpg'"
          [lazyImg]="true"
          [alt]="tr('sections.how.caption')"
          [caption]="tr('sections.how.caption')"
          [reverse]="false"
          [scope]="sp">
          <p>{{ tr('sections.how.intro') }}</p>
          <ul>
            <ng-container *transloco="let t; scope: sp">
              <li *ngFor="let step of arr(t('sections.how.items', { returnObjects: true }))">
                {{ step }}
              </li>
            </ng-container>
          </ul>
        </app-tutorial-section>

        <!-- LIVE SHARING (UNIQUE) -->
        <app-tutorial-section
          [title]="tr('sections.sharing.title')"
          [img]="'assets/tutorials/lucky-draw/sharing.jpg'"
          [lazyImg]="true"
          [alt]="tr('sections.sharing.caption')"
          [caption]="tr('sections.sharing.caption')"
          [reverse]="true"
          [scope]="sp">
          <p>{{ tr('sections.sharing.intro') }}</p>
          <ul>
            <ng-container *transloco="let t; scope: sp">
              <li *ngFor="let s of arr(t('sections.sharing.items', { returnObjects: true }))">
                {{ s }}
              </li>
            </ng-container>
          </ul>
        </app-tutorial-section>

        <!-- USE CASES -->
        <app-tutorial-section
          [title]="tr('sections.useCases.title')"
          [img]="'assets/tutorials/lucky-draw/use-cases.jpg'"
          [lazyImg]="true"
          [alt]="tr('sections.useCases.caption')"
          [caption]="tr('sections.useCases.caption')"
          [reverse]="false"
          [scope]="sp">
          <p>{{ tr('sections.useCases.intro') }}</p>
          <ul>
            <ng-container *transloco="let t; scope: sp">
              <li *ngFor="let u of arr(t('sections.useCases.items', { returnObjects: true }))">
                {{ u }}
              </li>
            </ng-container>
          </ul>
        </app-tutorial-section>

        <!-- FEATURES -->
        <app-tutorial-section
          [title]="tr('sections.features.title')"
          [img]="'assets/tutorials/lucky-draw/features.jpg'"
          [lazyImg]="true"
          [alt]="tr('sections.features.caption')"
          [caption]="tr('sections.features.caption')"
          [reverse]="true"
          [scope]="sp">
          <p>{{ tr('sections.features.p') }}</p>
          <ul>
            <ng-container *transloco="let t; scope: sp">
              <li *ngFor="let f of arr(t('sections.features.items', { returnObjects: true }))">
                {{ f }}
              </li>
            </ng-container>
          </ul>
        </app-tutorial-section>

        <!-- VIDEO -->
        <section id="video" class="section">
          <h3>{{ tr('video.title') }}</h3>
          <div class="video">
            <figure class="yt yt--md">
              <iframe
                src="https://www.youtube-nocookie.com/embed/qDd80xRXoTE"
                title="Lucky Draw demo" loading="lazy"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen></iframe>
              <figcaption>{{ tr('video.walkthrough') }}</figcaption>
            </figure>
            <small class="caption">{{ tr('video.walkthrough') }}</small>
          </div>
        </section>

        <!-- FOOTNOTE / KEYWORDS (optional) -->
        <section class="keywords">
          <small>{{ tr('keywords') }}</small>
        </section>
      </ng-container>
      <!-- /Lucky Draw -->

      <!-- ========== System of Equations Trainer ========== -->
      <ng-container *ngSwitchCase="'system-of-equations'">
        <h2>{{ tr('description.title') }}</h2>
        <p class="lead">{{ tr('description.lead') }}</p>
        <img class="app-header"
             src="assets/tutorials/system-of-equations/header.jpg"
             [attr.alt]="tr('title')" loading="lazy" decoding="async">
        <!-- ... wstaw swoje sekcje ... -->
      </ng-container>

      <!-- ========== Bible Echo ========== -->
      <ng-container *ngSwitchCase="'bibble-echo'">
        <h2>{{ tr('description.title') }}</h2>
        <p class="lead">{{ tr('description.lead') }}</p>

        <img class="app-header"
             src="assets/tutorials/bibble-echo/header.jpg"
             [attr.alt]="tr('title')"
             loading="lazy" decoding="async" />

        <!-- HOW -->
        <app-tutorial-section
          [title]="tr('sections.how.title')"
          [img]="'assets/tutorials/bibble-echo/how.jpg'"
          [lazyImg]="true"
          [alt]="tr('sections.how.caption')"
          [caption]="tr('sections.how.caption')"
          [reverse]="false"
          [scope]="sp">
          <p>{{ tr('sections.how.intro') }}</p>
          <ul>
            <ng-container *transloco="let t; scope: sp">
              <li *ngFor="let step of arr(t('sections.how.items', { returnObjects: true }))">
                {{ step }}
              </li>
            </ng-container>
          </ul>
        </app-tutorial-section>

        <!-- FEATURES -->
        <app-tutorial-section
          [title]="tr('sections.features.title')"
          [img]="'assets/tutorials/bibble-echo/features.jpg'"
          [lazyImg]="true"
          [alt]="tr('sections.features.caption')"
          [caption]="tr('sections.features.caption')"
          [reverse]="true"
          [scope]="sp">
          <p>{{ tr('sections.features.p') }}</p>
          <ul>
            <ng-container *transloco="let t; scope: sp">
              <li *ngFor="let f of arr(t('sections.features.items', { returnObjects: true }))">
                {{ f }}
              </li>
            </ng-container>
          </ul>
        </app-tutorial-section>

        <!-- WHY -->
        <app-tutorial-section
          [title]="tr('sections.why.title')"
          [img]="'assets/tutorials/bibble-echo/why.jpg'"
          [lazyImg]="true"
          [alt]="tr('sections.why.caption')"
          [caption]="tr('sections.why.caption')"
          [reverse]="false"
          [scope]="sp">
          <p>{{ tr('sections.why.intro') }}</p>
          <ul>
            <ng-container *transloco="let t; scope: sp">
              <li *ngFor="let w of arr(t('sections.why.items', { returnObjects: true }))">
                {{ w }}
              </li>
            </ng-container>
          </ul>
        </app-tutorial-section>

        <!-- VIDEO -->
        <section id="video" class="section">
          <h3>{{ tr('video.title') }}</h3>
          <div class="video">
            <figure class="yt yt--md">
              <iframe
                src="https://www.youtube-nocookie.com/embed/dPNyGkylsS4"
                title="Bibble echo demo" loading="lazy"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen></iframe>
              <figcaption>{{ tr('video.walkthrough') }}</figcaption>
            </figure>
            <small class="caption">{{ tr('video.walkthrough') }}</small>
          </div>
        </section>

        <!-- KEYWORDS -->
        <section class="keywords">
          <small>{{ tr('keywords') }}</small>
        </section>
      </ng-container>
      <!-- /Bible Echo -->

      <!-- ========== Bubble World ========== -->
      <ng-container *ngSwitchCase="'bubble-world'">
        <h2>{{ tr('description.title') }}</h2>
        <p class="lead">{{ tr('description.lead') }}</p>

        <img class="app-header"
             src="assets/tutorials/bubble-world/header.jpg"
             [attr.alt]="tr('title')"
             loading="lazy" decoding="async" />

        <!-- HOW -->
        <app-tutorial-section
          [title]="tr('sections.how.title')"
          [img]="'assets/tutorials/bubble-world/how.jpg'"
          [lazyImg]="true"
          [alt]="tr('sections.how.caption')"
          [caption]="tr('sections.how.caption')"
          [reverse]="false"
          [scope]="sp">
          <p>{{ tr('sections.how.intro') }}</p>
          <ul>
            <ng-container *transloco="let t; scope: sp">
              <li *ngFor="let step of arr(t('sections.how.items', { returnObjects: true }))">
                {{ step }}
              </li>
            </ng-container>
          </ul>
        </app-tutorial-section>

        <!-- STRATEGY -->
        <app-tutorial-section
          [title]="tr('sections.strategy.title')"
          [img]="'assets/tutorials/bubble-world/strategy.jpg'"
          [lazyImg]="true"
          [alt]="tr('sections.strategy.caption')"
          [caption]="tr('sections.strategy.caption')"
          [reverse]="true"
          [scope]="sp">
          <p>{{ tr('sections.strategy.intro') }}</p>
          <ul>
            <ng-container *transloco="let t; scope: sp">
              <li *ngFor="let tip of arr(t('sections.strategy.items', { returnObjects: true }))">
                {{ tip }}
              </li>
            </ng-container>
          </ul>
        </app-tutorial-section>

        <!-- FEATURES -->
        <app-tutorial-section
          [title]="tr('sections.features.title')"
          [img]="'assets/tutorials/bubble-world/features.jpg'"
          [lazyImg]="true"
          [alt]="tr('sections.features.caption')"
          [caption]="tr('sections.features.caption')"
          [reverse]="false"
          [scope]="sp">
          <p>{{ tr('sections.features.p') }}</p>
          <ul>
            <ng-container *transloco="let t; scope: sp">
              <li *ngFor="let f of arr(t('sections.features.items', { returnObjects: true }))">
                {{ f }}
              </li>
            </ng-container>
          </ul>
        </app-tutorial-section>

        <!-- VIDEO -->
        <section id="video" class="section">
          <h3>{{ tr('video.title') }}</h3>
          <div class="video">
            <figure class="yt yt--md">
              <iframe
                src="https://www.youtube-nocookie.com/embed/Fm6bv8fx6oY"
                title="Bubble world demo" loading="lazy"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen></iframe>
              <figcaption>{{ tr('video.walkthrough') }}</figcaption>
            </figure>
            <small class="caption">{{ tr('video.walkthrough') }}</small>
          </div>
        </section>

        <!-- KEYWORDS -->
        <section class="keywords">
          <small>{{ tr('keywords') }}</small>
        </section>
      </ng-container>
      <!-- /Bubble World -->

      <!-- ========== Fallback (nieznany slug) ========== -->
      <ng-container *ngSwitchDefault>
        <p class="muted">Nie znaleziono treści dla tego produktu.</p>
      </ng-container>

    </ng-container> <!-- /ngSwitch -->
  </section>
</ng-container>
